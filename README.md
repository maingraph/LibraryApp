Ниже приведена подробная документация для приложения «Управление личной библиотекой». Документация описывает архитектуру проекта, назначение классов, способы запуска и примеры использования.

---

Документация по проекту «Управление личной библиотекой»

1. Описание проекта

Приложение предназначено для управления личной библиотекой с возможностью добавления, удаления, обновления, поиска и сортировки элементов библиотеки (книг и журналов). Помимо работы в консольном режиме с параметрами командной строки, приложение включает простой графический интерфейс, отображающий список элементов и диаграмму (бар-чарт) количества элементов по годам.

Для импорта и экспорта данных используется формат JSON с помощью библиотеки [Gson](https://github.com/google/gson). Также реализован параллельный поиск элементов с использованием пула потоков (ExecutorService).

---

2. Структура проекта

Все исходные файлы находятся в пакете `library`. Ниже приведено описание каждого класса и интерфейса:

 2.1. Классы и интерфейсы

- LibraryItem (абстрактный класс)**
  - Назначение: Содержит общий функционал для всех элементов библиотеки, таких как уникальный идентификатор и метод `getInfo()`, возвращающий основную информацию об объекте.
  - Поля:
    - `id` – уникальный идентификатор, генерируемый автоматически.
  - Методы:
    - `public abstract String getInfo()` – метод для получения информации об объекте.

- Searchable (интерфейс)
  - Назначение:** Определяет метод для поиска по ключевому слову внутри объекта (например, по заголовку, автору или редактору).
  - Метод:
    - `boolean contains(String keyword)`

- Sortable (интерфейс)
  - Назначение:** Задает метод сравнения объектов по указанному критерию (например, заголовок, автор/редактор, год издания/выпуска).
  - Метод:
    - `int compareTo(LibraryItem other, String criterion)`

- Book (класс)
  - Наследует: `LibraryItem`
  - Реализует: `Searchable`, `Sortable`
  - Поля:
    - `title` – заголовок книги.
    - `author` – автор книги.
    - `year` – год издания.
  - Методы:
    - Переопределяет методы `getInfo()`, `contains()` и `compareTo()` для работы с книгами.

- Magazine (класс)
  - Наследует: `LibraryItem`
  - Реализует: `Searchable`, `Sortable`
  - Поля:
    - `title` – заголовок журнала.
    - `editor` – редактор журнала.
    - `year` – год выпуска.
    - `issueNumber` – номер выпуска.
  - Методы:
    - Переопределяет методы `getInfo()`, `contains()` и `compareTo()` для работы с журналами.

- LibraryItemSerializer (класс)
  - Назначение: Класс-сериализатор для библиотеки, используемый Gson для преобразования объектов `LibraryItem` в JSON. Добавляет дополнительное поле `"type"`, чтобы при десериализации понять, с каким конкретным классом работать.

- LibraryItemDeserializer (класс)
  - Назначение: Класс-десериализатор для библиотеки, используемый Gson для восстановления объектов `LibraryItem` из JSON. Считывает поле `"type"` и, исходя из его значения, создаёт экземпляр `Book` или `Magazine`.

- LibraryApp (класс)
  - Назначение: Основной класс приложения. Содержит логику для управления коллекцией элементов библиотеки, импорт/экспорт в JSON, поиск и сортировку. Также включает реализацию графического интерфейса.
  - Поля:
    - `List<LibraryItem> libraryItems` – коллекция для хранения книг и журналов.
  - Методы:
    - `addItem(LibraryItem item)` – добавление элемента.
    - `removeItem(int id)` – удаление элемента по id.
    - `findItemById(int id)` – поиск элемента по id.
    - `updateItem(int id, LibraryItem updatedItem)` – обновление элемента.
    - `importFromJSON(String filename)` – импорт данных из файла JSON.
    - `exportToJSON(String filename)` – экспорт данных в файл JSON.
    - `searchItems(String keyword)` – параллельный поиск элементов по ключевому слову.
    - `sortItems(String criterion)` – сортировка элементов по заданному критерию.
    - `launchGUI()` – запуск графического интерфейса, отображающего список элементов и диаграмму.
    - `main(String[] args)` – основной метод обработки командной строки и запуска приложения.

- ChartPanel (класс)
  - Наследует: `JPanel` (из пакета Swing)
  - Назначение: Кастомная панель для рисования диаграммы (бар-чарт) с количеством элементов по годам.
  - Метод:
    - `protected void paintComponent(Graphics g)` – переопределён для отрисовки диаграммы.

---

3. Зависимости

Для работы с JSON используется библиотека Gson.  
Способы подключения:

1. Maven: 
   Добавьте в файл `pom.xml` следующий блок в разделе `<dependencies>`:
   ```xml
   <dependency>
       <groupId>com.google.code.gson</groupId>
       <artifactId>gson</artifactId>
       <version>2.10</version>
   </dependency>
   ```

2. Ручное подключение:  
   Скачайте JAR-файл Gson (например, `gson-2.10.jar`) и добавьте его через **File → Project Structure → Libraries** в IntelliJ IDEA.

---

4. Запуск приложения

Приложение можно запускать в консольном режиме, передавая командные аргументы, либо в графическом режиме.

 4.1. Использование командной строки

Запустите приложение с параметрами, например:

- Импорт данных:
  ```
  java -jar LibraryApp.jar import test_library.json
  ```
  Импортирует данные из файла `test_library.json` в коллекцию.

- Экспорт данных:
  ```
  java -jar LibraryApp.jar export output.json
  ```
  Экспортирует текущую коллекцию в файл `output.json` в формате JSON.

- Поиск по ключевому слову:
  ```
  java -jar LibraryApp.jar search java
  ```
  Выполняет параллельный поиск элементов, содержащих слово «java» (в заголовке или имени автора/редактора), и выводит результаты в консоль.

- Сортировка:
  ```
  java -jar LibraryApp.jar sort year
  ```
  Сортирует коллекцию по году издания/выпуска. Другие возможные критерии – `"title"`, `"author"` (для книг) или `"editor"` (для журналов).

- Запуск графического интерфейса:
  ```
  java -jar LibraryApp.jar gui
  ```
  Запускает приложение с графическим интерфейсом, где отображается список элементов и диаграмма по годам.

 4.2. Запуск без параметров

Если приложение запущено без аргументов, оно:
- Выводит справку о возможных параметрах.
- Добавляет тестовые данные (например, книги и журналы).
- Запускает графический интерфейс.

---

5. Графический интерфейс

При запуске в режиме `gui` открывается окно, содержащее:

- Список элементов библиотеки: 
  Отображается с помощью компонента `JList`, где каждая строка – результат вызова метода `getInfo()` объекта `LibraryItem`.

- Диаграмма (бар-чарт):
  Панель `ChartPanel` отрисовывает простую диаграмму, где для каждого года определяется количество элементов библиотеки. Диаграмма рисуется с использованием методов `fillRect()`, `drawRect()` и `drawString()` класса `Graphics`.

---

6. Примеры тестовых данных

Создайте файл `test_library.json` с примерным содержимым:
```json
[
  {
    "id": 1,
    "title": "Effective Java",
    "author": "Joshua Bloch",
    "year": 2008,
    "type": "Book"
  },
  {
    "id": 2,
    "title": "National Geographic",
    "editor": "Susan Goldberg",
    "year": 2021,
    "issueNumber": 5,
    "type": "Magazine"
  },
  {
    "id": 3,
    "title": "Clean Code",
    "author": "Robert C. Martin",
    "year": 2008,
    "type": "Book"
  }
]
```


8. Заключение

Данное приложение реализует все основные функции управления библиотекой:  
- Работа с коллекцией объектов с использованием обобщений и коллекций.
- Импорт и экспорт данных в JSON-формате с помощью библиотеки Gson.
- Параллельный поиск с использованием потоков.
- Сортировка по заданным критериям.
- Графическое отображение данных с помощью Swing.

